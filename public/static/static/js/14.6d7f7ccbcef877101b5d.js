webpackJsonp([14],{"2ow9":function(e,o){},"AeZ+":function(e,o,s){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=s("VsUZ"),r={data:function(){var e=this;return{storeList:[],goods_keywords:[{key:""}],filelist:[],form:{store_id:"",goods_name:"",goods_url:"",goods_image:"",goods_price:"",goods_keywords:""},rules:{store_id:[{validator:function(e,o,s){""===o?s(new Error("请选择店铺")):s()},trigger:"blur"}],goods_name:[{validator:function(e,o,s){""===o?s(new Error("商品名称不能为空")):s()},trigger:"blur"}],goods_price:[{validator:function(e,o,s){""===o?s(new Error("商品价格不能为空")):s()},trigger:"blur"}],goods_url:[{validator:function(e,o,s){""===o?s(new Error("商品链接不能为空")):s()},trigger:"blur"}],goods_keywords:[{validator:function(o,s,t){""===e.goods_keywords[e.goods_keywords.length-1].key?t(new Error("请填写关键字")):t()},trigger:"blur"}]}}},created:function(){this.getStoreList()},methods:{getStoreList:function(){var e=this;t.a.storelist().then(function(o){o.succ?e.storeList=o.data:(e.$message({showClose:!0,message:o.msg,type:"error"}),"20112"===o.code&&e.$router.push("/login"))},function(o){e.$message({showClose:!0,message:o,type:"error"})})},beforeUpload:function(e){var o=this,s={extension:e.name.split(".")[1]};return t.a.getToken(s).then(function(s){if(s.succ){var r=new FormData;r.append("file",e),r.append("token",s.data.token),r.append("key",s.data.key),t.a.upload(r).then(function(e){o.form.goods_image=s.data.host+e.key},function(e){o.$message({showClose:!0,message:e,type:"error"})})}else o.$message({showClose:!0,message:s.msg,type:"error"}),"20122"===s.data.code&&o.$router.push("/login")},function(e){o.$message({showClose:!0,message:e,type:"error"})}),!1},addKey:function(){var e=this,o=0;this.goods_keywords.forEach(function(s){""===s.key&&(e.$message({showClose:!0,message:"请输入关键字",type:"error"}),o++)}),0===o&&this.goods_keywords.push({key:""})},onSubmit:function(e){var o=this;this.$refs[e].validate(function(e){if(e){var s=[];o.goods_keywords.forEach(function(e){s.push(e.key)}),o.form.goods_keywords=s.join("|"),o.form.goods_price=100*o.form.goods_price,t.a.creategoods(o.form).then(function(e){e.succ?o.$router.push("/backManage/goodslist"):(o.$message({showClose:!0,message:e.msg,type:"error"}),"20112"===e.code&&o.$router.push("/login"))},function(e){o.$message({showClose:!0,message:e,type:"error"})})}})}}},a={render:function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"商品店铺",prop:"store_id"}},[s("el-select",{attrs:{placeholder:"请选商品店铺"},model:{value:e.form.store_id,callback:function(o){e.$set(e.form,"store_id",o)},expression:"form.store_id"}},e._l(e.storeList,function(e){return s("el-option",{key:e.id,attrs:{label:e.store_name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{staticClass:"input_width",attrs:{label:"商品名称",prop:"goods_name"}},[s("el-input",{model:{value:e.form.goods_name,callback:function(o){e.$set(e.form,"goods_name",o)},expression:"form.goods_name"}})],1),e._v(" "),s("el-form-item",{staticClass:"input_width",attrs:{label:"商品链接",prop:"goods_url"}},[s("el-input",{model:{value:e.form.goods_url,callback:function(o){e.$set(e.form,"goods_url",o)},expression:"form.goods_url"}})],1),e._v(" "),s("el-form-item",{staticClass:"input_width",attrs:{label:"商品价格",prop:"goods_price"}},[s("el-input",{model:{value:e.form.goods_price,callback:function(o){e.$set(e.form,"goods_price",o)},expression:"form.goods_price"}})],1),e._v(" "),s("el-form-item",{staticClass:"input_width",attrs:{label:"商品关键字",prop:"goods_keywords"}},[e._l(e.goods_keywords,function(o,t){return s("div",{key:t},[s("el-input",{staticStyle:{width:"90%",margin:"0 5px 5px 0"},model:{value:o.key,callback:function(s){e.$set(o,"key",s)},expression:"item.key"}})],1)}),e._v(" "),s("i",{staticClass:"el-icon-circle-plus addBtn",on:{click:e.addKey}})],2),e._v(" "),s("el-form-item",{attrs:{label:"商品主图"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:"123","show-file-list":!1,"before-upload":e.beforeUpload}},[e.form.goods_image?s("img",{staticClass:"avatar",attrs:{src:e.form.goods_image}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(o){e.onSubmit("form")}}},[e._v("立即创建")]),e._v(" "),s("el-button",[e._v("取消")])],1)],1)},staticRenderFns:[]};var i=s("VU/8")(r,a,!1,function(e){s("2ow9")},"data-v-68ff6b30",null);o.default=i.exports}});
//# sourceMappingURL=14.6d7f7ccbcef877101b5d.js.map