webpackJsonp([5],{BZv7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("VsUZ"),o=s("lbHh"),a={data:function(){return{tableData:[],order_status:"",orderStatusList:[{key:1,value:"状态1"},{key:2,value:"状态2"},{key:3,value:"状态3"},{key:4,value:"状态4"},{key:5,value:"状态5"},{key:6,value:"状态6"},{key:7,value:"状态7"},{key:8,value:"状态8"}],role:"",currentPage:1,total:0,storeid:"",storeList:[]}},created:function(){this.getStoreList(),this.getList(),this.role=o.get("role")},methods:{handleCurrentChange:function(e){this.currentPage=e,this.getList()},getStoreList:function(){var e=this;r.a.storelist().then(function(t){t.succ?e.storeList=t.data:(e.$message({showClose:!0,message:t.msg,type:"error"}),"20122"===t.data.code&&e.$router.push("/login"))},function(t){e.$message({showClose:!0,message:t,type:"error"})})},getList:function(){var e=this,t={page:this.currentPage,order_status:this.orderid};this.$route.params.activityid&&(t.task_id=this.$route.params.activityid),r.a.myorderlist(t).then(function(t){t.succ?(e.tableData=t.data.data,console.log(t.data.data),e.currentPage=parseInt(t.data.current_page),e.total=parseInt(t.data.total)):(e.$message({showClose:!0,message:t.msg,type:"error"}),"20122"===t.data.code&&e.$router.push("/login"))},function(t){e.$message({showClose:!0,message:t,type:"error"})})},search:function(){this.getList()},audit:function(e){var t=this;r.a.verifyorder(e).then(function(e){e.succ?t.getList():(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},start:function(e,t){this.$router.push({name:"startorder",params:{orderid:e,taskid:t}})},confirm:function(e){var t=this;r.a.sellerConfirmOrder(e).then(function(e){e.succ?(t.$message({showClose:!0,message:"审核成功",type:"success"}),t.getList()):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},recept:function(e){var t=this;r.a.buyerConfirmOrder(e).then(function(e){e.succ?(t.$message({showClose:!0,message:"确认成功",type:"success"}),t.getList()):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},orderDone:function(e){var t=this;r.a.revert(e).then(function(e){e.succ?(t.$message({showClose:!0,message:"返款成功",type:"success"}),t.getList()):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},freeze:function(e){var t=this;r.a.freeze(e).then(function(e){e.succ?(t.$message({showClose:!0,message:"冻结成功",type:"success"}),t.getList()):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},delorder:function(e){var t=this;r.a.delorder(e).then(function(e){e.succ?(t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getList()):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20122"===e.data.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})}}},n={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-form",{ref:"form",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"选择活动"}},[s("el-select",{model:{value:e.storeid,callback:function(t){e.storeid=t},expression:"storeid"}},e._l(e.storeList,function(e){return s("el-option",{key:e.id,attrs:{label:e.store_name,value:e.id}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"订单状态"}},[s("el-select",{model:{value:e.order_status,callback:function(t){e.order_status=t},expression:"order_status"}},e._l(e.orderStatusList,function(e){return s("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}))],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{prop:"order_status",label:"订单状态",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{label:"订单号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.order_id?s("span",[e._v(e._s(t.row.order_id))]):s("span",[e._v("-")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"价格",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.price?s("span",[e._v(e._s(t.row.price))]):s("span",[e._v("-")])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_status&&2==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.audit(t.row.id)}}},[e._v("审核")]):e._e(),e._v(" "),2==t.row.order_status&&1==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.start(t.row.id,t.row.task_id)}}},[e._v("开始任务")]):e._e(),e._v(" "),3==t.row.order_status&&2==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.confirm(t.row.id)}}},[e._v("核对订单")]):e._e(),e._v(" "),4==t.row.order_status&&1==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.recept(t.row.id)}}},[e._v("确认收货")]):e._e(),e._v(" "),5==t.row.order_status&&2==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.orderDone(t.row.id)}}},[e._v("返款")]):e._e(),e._v(" "),5==t.row.order_status&&2==e.role?s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.freeze(t.row.id)}}},[e._v("冻结")]):e._e(),e._v(" "),s("el-button",{attrs:{type:"text",size:"small"},on:{click:function(s){e.delorder(t.row.id)}}},[e._v("删除订单")])]}}])})],1),e._v(" "),s("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)},staticRenderFns:[]};var l=s("VU/8")(a,n,!1,function(e){s("rbZT")},"data-v-db091c4c",null);t.default=l.exports},rbZT:function(e,t){}});
//# sourceMappingURL=5.eb0f9e15057daf9bad37.js.map