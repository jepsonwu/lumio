webpackJsonp([22],{L036:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("VsUZ"),o={data:function(){var e=this;return{active:0,info:{mobile:"",captcha:"",password:"",confirm_password:""},rules:{mobile:[{validator:function(e,t,s){""===t?s(new Error("手机号不能为空")):/^1(3|4|5|7|8)\d{9}$/.test(t)?s():s(new Error("手机号不正确"))},trigger:"blur"}],captcha:[{validator:function(e,t,s){""===t?s(new Error("验证码不能为空")):s()},tigger:"blur"}],password:[{validator:function(e,t,s){""===t?s(new Error("密码不能为空")):t&&t.length<6?s(new Error("密码长度不能小于6位")):s()},trigger:"blur"}],confirm_password:[{validator:function(t,s,a){""===s?a(new Error("密码不能为空")):s!==e.info.password?a(new Error("两次输入密码不一致")):a()},trigger:"blur"}]}}},methods:{next:function(e,t){var s=this;0==e?this.$refs[t].validate(function(e){e&&s.active++}):1==e?this.$refs[t].validate(function(e){e&&s.active++}):a.a.reset(this.info).then(function(e){e.succ?(s.$message({showClose:!0,message:"密码修改成功",type:"success"}),s.$router.push("/login")):s.$message({showClose:!0,message:e.msg,type:"error"})},function(e){s.$message({showClose:!0,message:e,type:"error"})})},getCapcha:function(){var e=this;this.info.mobile?a.a.smscaptcha({mobile:this.info.mobile}).then(function(t){t.succ?e.$message({showClose:!0,message:"验证码已发送，请查收",type:"success"}):e.$message({showClose:!0,message:t.msg,type:"error"})},function(t){e.$message({showClose:!0,message:t,type:"error"})}):this.$message({showClose:!0,message:"请填写手机号",type:"error"})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("article",{staticClass:"content"},[s("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[s("el-step",{attrs:{title:"验证身份"}}),e._v(" "),s("el-step",{attrs:{title:"修改密码"}}),e._v(" "),s("el-step",{attrs:{title:"修改完成"}})],1),e._v(" "),s("div",{staticClass:"step-block"},[s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active==0"}]},[s("el-form",{ref:"form1",staticClass:"form",attrs:{model:e.info,rules:e.rules,"label-position":"right","label-width":"110px"}},[s("el-form-item",{attrs:{label:"已绑定手机号",prop:"mobile"}},[s("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.info.mobile,callback:function(t){e.$set(e.info,"mobile",t)},expression:"info.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"核对手机验证码",prop:"captcha"}},[s("el-input",{staticClass:"sm_input",attrs:{placeholder:"请输入短信验证码"},model:{value:e.info.captcha,callback:function(t){e.$set(e.info,"captcha",t)},expression:"info.captcha"}}),e._v(" "),s("span",[s("a",{staticClass:"get_sms",on:{click:e.getCapcha}},[e._v("短信获取")])])],1)],1),e._v(" "),s("div",{staticClass:"btn-block"},[s("el-button",{staticClass:"btn",staticStyle:{"margin-top":"12px"},on:{click:function(t){e.next(0,"form1")}}},[e._v("下一步")])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active==1"}]},[s("el-form",{ref:"form2",staticClass:"form",attrs:{model:e.info,rules:e.rules,"label-position":"right","label-width":"110px"}},[s("el-form-item",{attrs:{label:"新密码",prop:"password"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.password,expression:"info.password"}],staticClass:"inputBox",attrs:{type:"password",placeholder:"6位以上字符，包含英文、数字"},domProps:{value:e.info.password},on:{input:function(t){t.target.composing||e.$set(e.info,"password",t.target.value)}}})]),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"confirm_password"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.info.confirm_password,expression:"info.confirm_password"}],staticClass:"inputBox",attrs:{type:"password",placeholder:"6位以上字符，包含英文、数字"},domProps:{value:e.info.confirm_password},on:{input:function(t){t.target.composing||e.$set(e.info,"confirm_password",t.target.value)}}})])],1),e._v(" "),s("div",{staticClass:"btn-block"},[s("el-button",{staticClass:"btn",staticStyle:{"margin-top":"12px"},on:{click:function(t){e.next(1,"form2")}}},[e._v("下一步")])],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active==2"}]},[e._m(0),e._v(" "),s("div",{staticClass:"btn-block"},[s("el-button",{staticClass:"btn",staticStyle:{"margin-top":"12px"},on:{click:function(t){e.next(2)}}},[e._v("完成")])],1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"txt-center"},[t("i",{staticClass:"el-icon-circle-check"})])}]};var r=s("VU/8")(o,i,!1,function(e){s("UDlx")},"data-v-2ce2c9ac",null);t.default=r.exports},UDlx:function(e,t){}});
//# sourceMappingURL=22.8100988f1aa2fc00267a.js.map