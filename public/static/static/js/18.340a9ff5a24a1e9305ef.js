webpackJsonp([18],{CqJc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("VsUZ"),o={data:function(){return{store_id:"",goods_id:"",platform:"",task_status:"",goods_name:"",currentPage:1,total:0,storeList:[],taskList:[],goods_List:[]}},created:function(){this.getStoreList(),this.getTaskList()},methods:{changeStore:function(){var t=this,e={store_id:this.store_id};s.a.goodslist(e).then(function(e){e.succ?(console.log(e.data),t.goods_List=e.data.data):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20112"===e.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},getStoreList:function(){var t=this;s.a.storelist().then(function(e){e.succ?t.storeList=e.data:(t.$message({showClose:!0,message:e.msg,type:"error"}),"20112"===e.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},getTaskList:function(){var t=this,e={store_id:this.store_id,goods_id:this.goods_id,goods_name:this.goods_name,task_status:this.task_status,platform:this.platform,page:this.currentPage};s.a.mytasklist(e).then(function(e){e.succ?(console.log(e.data),t.taskList=e.data.data,t.currentPage=parseInt(e.data.current_page),t.total=parseInt(e.data.total)):(t.$message({showClose:!0,message:e.msg,type:"error"}),"20112"===e.code&&t.$router.push("/login"))},function(e){t.$message({showClose:!0,message:e,type:"error"})})},handleCurrentChange:function(t){this.currentPage=t,this.getTaskList()},edit:function(t){this.$router.push({name:"editact",params:{activityid:t}})},audit:function(t){this.$router.push({name:"orderlist",params:{activityid:t}})},createOrder:function(t){this.$router.push({name:"orderlist",params:{activityid:t}})},delData:function(t){var e=this;s.a.deltask(t).then(function(t){t.succ?e.getTaskList():(e.$message({showClose:!0,message:t.msg,type:"error"}),"20122"===t.data.code&&e.$router.push("/login"))},function(t){e.$message({showClose:!0,message:t,type:"error"})})},onSubmit:function(){this.currentPage=1,this.getTaskList()}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择店铺",prop:"store_id"}},[a("el-select",{attrs:{placeholder:"请选商品店铺"},on:{change:t.changeStore},model:{value:t.store_id,callback:function(e){t.store_id=e},expression:"store_id"}},t._l(t.storeList,function(t){return a("el-option",{key:t.id,attrs:{label:t.store_name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"活动商品",prop:"goods_id"}},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择"},model:{value:t.goods_id,callback:function(e){t.goods_id=e},expression:"goods_id"}},t._l(t.goods_List,function(t){return a("el-option",{key:t.id,attrs:{label:t.goods_name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"进店方式"}},[a("el-select",{model:{value:t.platform,callback:function(e){t.platform=e},expression:"platform"}},[a("el-option",{attrs:{label:"电脑",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"手机",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动状态"}},[a("el-select",{model:{value:t.task_status,callback:function(e){t.task_status=e},expression:"task_status"}},[a("el-option",{attrs:{label:"待审核",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"待开始",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"待确认订单",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"待收货",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"待返款",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"已关闭",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"已冻结",value:"6"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{model:{value:t.goods_name,callback:function(e){t.goods_name=e},expression:"goods_name"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("搜索")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.taskList,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"task_name",label:"活动名称",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"申请方式",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actitem"},[a("span",[t._v("进店方式")]),t._v(":"+t._s(e.row.platform))]),t._v(" "),a("div",{staticClass:"actitem"},[a("span",[t._v("关键字")]),t._v(":"+t._s(e.row.goods_keyword))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品详情",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actitem"},[a("span",[t._v("商品名称")]),t._v(":"+t._s(e.row.goods_name))]),t._v(" "),a("div",{staticClass:"actitem"},[a("span",[t._v("商品价格")]),t._v(":"+t._s(e.row.goods_price/100)+"元")]),t._v(" "),a("img",{staticStyle:{height:"50px",width:"50px"},attrs:{src:e.row.goods_image}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"活动份数",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actitem"},[a("span",[t._v("总份数")]),t._v(":"+t._s(e.row.total_order_number)+"份")]),t._v(" "),a("div",{staticClass:"actitem"},[a("span",[t._v("进行中")]),t._v(":"+t._s(e.row.doing_order_number)+"份")]),t._v(" "),a("div",{staticClass:"actitem"},[a("span",[t._v("已完成")]),t._v(":"+t._s(e.row.finished_order_number)+"份")]),t._v(" "),a("div",{staticClass:"actitem"},[a("span",[t._v("待开始")]),t._v(":"+t._s(e.row.waiting_order_number)+"份")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"task_status",label:"任务状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("time")(e.row.created_at)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delData(e.row.id)}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.audit(e.row.id)}}},[t._v("审核")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.createOrder(e.row.id)}}},[t._v("派发")])]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{float:"right","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("mbiE")},"data-v-56dbd699",null);e.default=r.exports},mbiE:function(t,e){}});
//# sourceMappingURL=18.340a9ff5a24a1e9305ef.js.map